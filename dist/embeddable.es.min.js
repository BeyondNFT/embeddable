function n(){}function e(n){return n()}function t(){return Object.create(null)}function o(n){n.forEach(e)}function r(n){return"function"==typeof n}function i(n,e){return n!=n?e==e:n!==e||n&&"object"==typeof n||"function"==typeof n}function s(n,e){n.appendChild(e)}function a(n,e,t){n.insertBefore(e,t||null)}function c(n){n.parentNode.removeChild(n)}function l(n){return document.createElement(n)}function d(n){return document.createTextNode(n)}function u(n,e,t){null==t?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function p(n,e,t){n.classList[t?"add":"remove"](e)}let f;function h(n){f=n}function m(){if(!f)throw new Error("Function called outside component initialization");return f}function g(){const n=m();return(e,t)=>{const o=n.$$.callbacks[e];if(o){const r=function(n,e){const t=document.createEvent("CustomEvent");return t.initCustomEvent(n,!1,!1,e),t}(e,t);o.slice().forEach((e=>{e.call(n,r)}))}}}const _=[],w=[],y=[],b=[],v=Promise.resolve();let $=!1;function k(n){y.push(n)}let x=!1;const E=new Set;function C(){if(!x){x=!0;do{for(let n=0;n<_.length;n+=1){const e=_[n];h(e),I(e.$$)}for(h(null),_.length=0;w.length;)w.pop()();for(let n=0;n<y.length;n+=1){const e=y[n];E.has(e)||(E.add(e),e())}y.length=0}while(_.length);for(;b.length;)b.pop()();$=!1,x=!1,E.clear()}}function I(n){if(null!==n.fragment){n.update(),o(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(k)}}const M=new Set;let N;function j(n,e){n&&n.i&&(M.delete(n),n.i(e))}function T(n,e,t,o){if(n&&n.o){if(M.has(n))return;M.add(n),N.c.push((()=>{M.delete(n),o&&(t&&n.d(1),o())})),n.o(e)}}function O(n,t,i,s){const{fragment:a,on_mount:c,on_destroy:l,after_update:d}=n.$$;a&&a.m(t,i),s||k((()=>{const t=c.map(e).filter(r);l?l.push(...t):o(t),n.$$.on_mount=[]})),d.forEach(k)}function U(n,e){const t=n.$$;null!==t.fragment&&(o(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function A(n,e){-1===n.$$.dirty[0]&&(_.push(n),$||($=!0,v.then(C)),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function S(e,r,i,s,a,l,d=[-1]){const u=f;h(e);const p=e.$$={fragment:null,ctx:null,props:l,update:n,not_equal:a,bound:t(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:r.context||[]),callbacks:t(),dirty:d,skip_bound:!1};let m=!1;if(p.ctx=i?i(e,r.props||{},((n,t,...o)=>{const r=o.length?o[0]:t;return p.ctx&&a(p.ctx[n],p.ctx[n]=r)&&(!p.skip_bound&&p.bound[n]&&p.bound[n](r),m&&A(e,n)),t})):[],p.update(),m=!0,o(p.before_update),p.fragment=!!s&&s(p.ctx),r.target){if(r.hydrate){const n=function(n){return Array.from(n.childNodes)}(r.target);p.fragment&&p.fragment.l(n),n.forEach(c)}else p.fragment&&p.fragment.c();r.intro&&j(e.$$.fragment),O(e,r.target,r.anchor,r.customElement),C()}h(u)}class R{$destroy(){U(this,1),this.$destroy=n}$on(n,e){const t=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return t.push(e),()=>{const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}$set(n){var e;this.$$set&&(e=n,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}var L=function({mustBeMetaMask:n=!1,silent:e=!1,timeout:t=3e3}={}){!function(){if("boolean"!=typeof n)throw new Error("@metamask/detect-provider: Expected option 'mustBeMetaMask' to be a boolean.");if("boolean"!=typeof e)throw new Error("@metamask/detect-provider: Expected option 'silent' to be a boolean.");if("number"!=typeof t)throw new Error("@metamask/detect-provider: Expected option 'timeout' to be a number.")}();let o=!1;return new Promise((r=>{function i(){if(o)return;o=!0,window.removeEventListener("ethereum#initialized",i);const{ethereum:t}=window;if(!t||n&&!t.isMetaMask){const o=n&&t?"Non-MetaMask window.ethereum detected.":"Unable to detect window.ethereum.";!e&&console.error("@metamask/detect-provider:",o),r(null)}else r(t)}window.ethereum?i():(window.addEventListener("ethereum#initialized",i,{once:!0}),setTimeout((()=>{i()}),t))}))},F=[{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"interactiveConfURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];async function P(){"undefined"!=typeof Web3&&"1.3.0"===Web3.version||await async function(){return new Promise(((n,e)=>{const t="https://cdnjs.cloudflare.com/ajax/libs/web3/1.3.0/web3.min.js",o=document.createElement("script");o.onload=n,o.onerror=e,o.src=t,document.body.appendChild(o)}))}();const n=await L();if(n){return{web3:new Web3(n),provider:n}}throw new Error("\n\t\t\tNo ethereum provider detected.\n\t\t\tPlease install Metamask or any other wallet (Polaris, Trust Wallet...).\n\t\t")}const z={mainnet:1,ropsten:3,rinkeby:4,goerli:5,kovan:42,polygon:137,xDai:100,mumbai:80001};function J(n){let e="Unknown";return Object.keys(z).forEach((t=>{z[t]===n&&(e=t)})),e}class W{constructor(n,e,t){this.address=n,this.tokenId=e,this.chainId=t,this.web3,this.provider}async connect(){const n=await P();this.web3=n.web3,this.provider=n.provider,this.provider.on("chainChanged",(n=>{window.location.reload()}));let e=await this.web3.eth.net.getId();if(e!==this.chainId)throw new Error(`Connected to the wrong network. Current{${e}:${J(e)}}; Expected{${this.chainId}:${J(this.chainId)}}`);this.instance=await async function(n,e){return new n.eth.Contract(F,e)}(this.web3,this.address)}async uris(){try{const n=await this.tokenURI();let e="";try{e=await this.interactiveConfURI()}catch(n){}return{tokenURI:n,interactiveConfURI:e}}catch(n){console.log(n)}}async tokenURI(){if(await this.instance.methods.supportsInterface("0x80ac58cd").call())return this.instance.methods.tokenURI(this.tokenId).call();if(await this.instance.methods.supportsInterface("0xd9b67a26").call()){let n=await this.instance.methods.uri(this.tokenId).call();if(-1!==n.indexOf("{id}")){const e=Web3.utils.toBN(this.tokenId).toString(16,64);n=n.replace("{id}",e)}return n}}async interactiveConfURI(){return this.instance.methods.interactiveConfURI(this.tokenId).call()}}let B="";var D={init(n){B=n},process:n=>n.replace("ipfs://",B)};function G(){}function K(n){return n()}function Y(){return Object.create(null)}function q(n){n.forEach(K)}function H(n){return"function"==typeof n}function Q(n,e){return n!=n?e==e:n!==e||n&&"object"==typeof n||"function"==typeof n}function V(n,e){n.appendChild(e)}function X(n,e,t){n.insertBefore(e,t||null)}function Z(n){n.parentNode.removeChild(n)}function nn(n){return document.createElement(n)}function en(n){return document.createTextNode(n)}function tn(n,e,t){null==t?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function on(n,e,t){n.classList[t?"add":"remove"](e)}let rn;function sn(n){rn=n}function an(){if(!rn)throw new Error("Function called outside component initialization");return rn}function cn(n){an().$$.on_mount.push(n)}function ln(){const n=an();return(e,t)=>{const o=n.$$.callbacks[e];if(o){const r=function(n,e){const t=document.createEvent("CustomEvent");return t.initCustomEvent(n,!1,!1,e),t}(e,t);o.slice().forEach((e=>{e.call(n,r)}))}}}function dn(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach((n=>n(e)))}const un=[],pn=[],fn=[],hn=[],mn=Promise.resolve();let gn=!1;function _n(n){fn.push(n)}let wn=!1;const yn=new Set;function bn(){if(!wn){wn=!0;do{for(let n=0;n<un.length;n+=1){const e=un[n];sn(e),vn(e.$$)}for(sn(null),un.length=0;pn.length;)pn.pop()();for(let n=0;n<fn.length;n+=1){const e=fn[n];yn.has(e)||(yn.add(e),e())}fn.length=0}while(un.length);for(;hn.length;)hn.pop()();gn=!1,wn=!1,yn.clear()}}function vn(n){if(null!==n.fragment){n.update(),q(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(_n)}}const $n=new Set;let kn;function xn(n,e){n&&n.i&&($n.delete(n),n.i(e))}function En(n,e,t,o){if(n&&n.o){if($n.has(n))return;$n.add(n),kn.c.push((()=>{$n.delete(n),o&&(t&&n.d(1),o())})),n.o(e)}}function Cn(n,e,t,o){const{fragment:r,on_mount:i,on_destroy:s,after_update:a}=n.$$;r&&r.m(e,t),o||_n((()=>{const e=i.map(K).filter(H);s?s.push(...e):q(e),n.$$.on_mount=[]})),a.forEach(_n)}function In(n,e){const t=n.$$;null!==t.fragment&&(q(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Mn(n,e,t,o,r,i,s=[-1]){const a=rn;sn(n);const c=n.$$={fragment:null,ctx:null,props:i,update:G,not_equal:r,bound:Y(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:Y(),dirty:s,skip_bound:!1};let l=!1;if(c.ctx=t?t(n,e.props||{},((e,t,...o)=>{const i=o.length?o[0]:t;return c.ctx&&r(c.ctx[e],c.ctx[e]=i)&&(!c.skip_bound&&c.bound[e]&&c.bound[e](i),l&&function(n,e){-1===n.$$.dirty[0]&&(un.push(n),gn||(gn=!0,mn.then(bn)),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}(n,e)),t})):[],c.update(),l=!0,q(c.before_update),c.fragment=!!o&&o(c.ctx),e.target){if(e.hydrate){const n=function(n){return Array.from(n.childNodes)}(e.target);c.fragment&&c.fragment.l(n),n.forEach(Z)}else c.fragment&&c.fragment.c();e.intro&&xn(n.$$.fragment),Cn(n,e.target,e.anchor,e.customElement),bn()}sn(a)}class Nn{$destroy(){In(this,1),this.$destroy=G}$on(n,e){const t=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return t.push(e),()=>{const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}$set(n){var e;this.$$set&&(e=n,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}let jn=1;function Tn(n){let e=n.action,t=n.cmd_id,o=this.pending_cmds.get(t);if(o){if(this.pending_cmds.delete(t),"cmd_error"===e){let{message:e,stack:t}=n,r=new Error(e);r.stack=t,o.reject(r)}"cmd_ok"===e&&o.resolve(n.args||"ok")}else console.error("command not found",t,n,[...this.pending_cmds.keys()])}function On(n){if(n.source!==this.iframe.contentWindow)return;const{action:e,args:t}=n.data;switch(e){case"cmd_error":case"cmd_ok":return Tn.call(this,n.data);case"fetch_progress":return this.handlers.on_fetch_progress(t.remaining);case"error":return this.handlers.on_error(n.data);case"unhandledrejection":return this.handlers.on_unhandled_rejection(n.data);case"console":return this.handlers.on_console(n.data);case"console_group":return this.handlers.on_console_group(n.data);case"console_group_collapsed":return this.handlers.on_console_group_collapsed(n.data);case"console_group_end":return this.handlers.on_console_group_end(n.data);default:const o=`on_${e}`;"function"==typeof this.handlers[o]&&this.handlers[o](n.data)}}class Un{constructor(n,e){this.iframe=n,this.handlers=e,this.pending_cmds=new Map,this.handle_event=On.bind(this),window.addEventListener("message",this.handle_event,!1)}destroy(){window.removeEventListener("message",this.handle_event)}iframe_command(n,e){return new Promise(((t,o)=>{const r=jn++;this.pending_cmds.set(r,{resolve:t,reject:o}),this.iframe.contentWindow.postMessage({action:n,cmd_id:r,args:e},"*")}))}size(){return this.iframe_command("size")}eval(n){return this.iframe_command("eval",{script:n})}add_script(n){return this.iframe_command("add_script",n)}add_script_content(n){return this.iframe_command("add_script_content",n)}add_style(n){return this.iframe_command("add_style",n)}add_asset(n){return this.iframe_command("add_asset",n)}handle_links(){return this.iframe_command("catch_clicks",{})}}function An(n){let e;return{c(){e=nn("strong"),e.innerHTML="<em>Sorry, an error occured while executing the NFT.</em>",tn(e,"class","beyondnft__sandbox__error svelte-uaiew6")},m(n,t){X(n,e,t)},d(n){n&&Z(e)}}}function Sn(n){let e,t,o,r,i=n[3]&&An();return{c(){e=nn("div"),t=nn("iframe"),r=en(" "),i&&i.c(),tn(t,"title","Sandbox"),tn(t,"sandbox",o=`allow-scripts allow-pointer-lock allow-popups allow-downloads ${n[0]}`),tn(t,"srcdoc",n[4]("<!DOCTYPE html>\n<html>\n  <head>\n    <style>\n      \n    </style>\n\n    <script>\n      (function () {\n        const local_eval = eval;\n        eval = function () {};\n\n        function handle_message(ev) {\n          let { action, cmd_id } = ev.data;\n          const send_message = (payload) =>\n            parent.postMessage({ ...payload }, ev.origin);\n\n          const send_reply = (payload) => send_message({ ...payload, cmd_id });\n          const send_ok = (args) => send_reply({ action: 'cmd_ok', args });\n          const send_error = (message, stack) =>\n            send_reply({ action: 'cmd_error', message, stack });\n\n          if (action === 'size') {\n            send_ok({\n              width: document.body.offsetWidth,\n              height: document.body.offsetHeight,\n            });\n          }\n\n          if (action === 'eval') {\n            try {\n              const { script } = ev.data.args;\n              local_eval(script);\n              send_ok();\n            } catch (e) {\n              send_error(e.message, e.stack);\n            }\n          }\n\n          if (action === 'add_script') {\n            try {\n              const script = document.createElement('script');\n              script.src = ev.data.args;\n              script.onload = () => send_ok();\n              document.body.appendChild(script);\n            } catch (e) {\n              send_error(e.message, e.stack);\n            }\n          }\n\n          if (action === 'add_script_content') {\n            try {\n              const script = document.createElement('script');\n              script.text = ev.data.args;\n              script.type = 'text/javascript';\n              document.body.appendChild(script);\n              send_ok();\n            } catch (e) {\n              send_error(e.message, e.stack);\n            }\n          }\n\n          if (action === 'add_style') {\n            try {\n              const link = document.createElement('link');\n              link.rel = 'stylesheet';\n              link.href = ev.data.args;\n              link.onload = () => send_ok();\n              document.body.appendChild(link);\n            } catch (e) {\n              send_error(e.message, e.stack);\n            }\n          }\n\n          if (action === 'catch_clicks') {\n            try {\n              const top_origin = ev.origin;\n              document.body.addEventListener('click', (event) => {\n                if (event.which !== 1) return;\n                if (event.metaKey || event.ctrlKey || event.shiftKey) return;\n                if (event.defaultPrevented) return;\n\n                // ensure target is a link\n                let el = event.target;\n                while (el && el.nodeName !== 'A') el = el.parentNode;\n                if (!el || el.nodeName !== 'A') return;\n\n                if (\n                  el.hasAttribute('download') ||\n                  el.getAttribute('rel') === 'external' ||\n                  el.target\n                )\n                  return;\n\n                event.preventDefault();\n\n                if (el.href.startsWith(top_origin)) {\n                  const url = new URL(el.href);\n                  if (url.hash[0] === '#') {\n                    window.location.hash = url.hash;\n                    return;\n                  }\n                }\n\n                window.open(el.href, '_blank');\n              });\n              send_ok();\n            } catch (e) {\n              send_error(e.message, e.stack);\n            }\n          }\n        }\n\n        window.addEventListener('message', handle_message, false);\n\n        window.onerror = function (msg, url, lineNo, columnNo, error) {\n          try {\n            parent.postMessage({ action: 'error', value: error }, '*');\n          } catch (e) {\n            parent.postMessage({ action: 'error', value: msg }, '*');\n            parent.postMessage({ action: 'error', value: error }, '*');\n          }\n        };\n\n        window.addEventListener('unhandledrejection', (event) => {\n          parent.postMessage(\n            { action: 'unhandledrejection', value: event.reason },\n            '*'\n          );\n        });\n\n        let previous = { level: null, args: null };\n\n        ['clear', 'log', 'info', 'dir', 'warn', 'error', 'table'].forEach(\n          (level) => {\n            const original = console[level];\n            console[level] = (...args) => {\n              const stringifiedArgs = stringify(args);\n              if (\n                previous.level === level &&\n                previous.args &&\n                previous.args === stringifiedArgs\n              ) {\n                parent.postMessage(\n                  { action: 'console', level, duplicate: true },\n                  '*'\n                );\n              } else {\n                previous = { level, args: stringifiedArgs };\n\n                try {\n                  parent.postMessage({ action: 'console', level, args }, '*');\n                } catch (err) {\n                  parent.postMessage(\n                    { action: 'console', level: 'unclonable' },\n                    '*'\n                  );\n                }\n              }\n\n              original(...args);\n            };\n          }\n        );\n\n        [\n          { method: 'group', action: 'console_group' },\n          { method: 'groupEnd', action: 'console_group_end' },\n          { method: 'groupCollapsed', action: 'console_group_collapsed' },\n        ].forEach((group_action) => {\n          const original = console[group_action.method];\n          console[group_action.method] = (label) => {\n            parent.postMessage({ action: group_action.action, label }, '*');\n\n            original(label);\n          };\n        });\n\n        const timers = new Map();\n        const original_time = console.time;\n        const original_timelog = console.timeLog;\n        const original_timeend = console.timeEnd;\n\n        console.time = (label = 'default') => {\n          original_time(label);\n          timers.set(label, performance.now());\n        };\n        console.timeLog = (label = 'default') => {\n          original_timelog(label);\n          const now = performance.now();\n          if (timers.has(label)) {\n            parent.postMessage(\n              {\n                action: 'console',\n                level: 'system-log',\n                args: [`${label}: ${now - timers.get(label)}ms`],\n              },\n              '*'\n            );\n          } else {\n            parent.postMessage(\n              {\n                action: 'console',\n                level: 'system-warn',\n                args: [`Timer '${label}' does not exist`],\n              },\n              '*'\n            );\n          }\n        };\n        console.timeEnd = (label = 'default') => {\n          original_timeend(label);\n          const now = performance.now();\n          if (timers.has(label)) {\n            parent.postMessage(\n              {\n                action: 'console',\n                level: 'system-log',\n                args: [`${label}: ${now - timers.get(label)}ms`],\n              },\n              '*'\n            );\n          } else {\n            parent.postMessage(\n              {\n                action: 'console',\n                level: 'system-warn',\n                args: [`Timer '${label}' does not exist`],\n              },\n              '*'\n            );\n          }\n          timers.delete(label);\n        };\n\n        const original_assert = console.assert;\n        console.assert = (condition, ...args) => {\n          if (condition) {\n            const stack = new Error().stack;\n            parent.postMessage(\n              { action: 'console', level: 'assert', args, stack },\n              '*'\n            );\n          }\n          original_assert(condition, ...args);\n        };\n\n        const counter = new Map();\n        const original_count = console.count;\n        const original_countreset = console.countReset;\n\n        console.count = (label = 'default') => {\n          counter.set(label, (counter.get(label) || 0) + 1);\n          parent.postMessage(\n            {\n              action: 'console',\n              level: 'system-log',\n              args: `${label}: ${counter.get(label)}`,\n            },\n            '*'\n          );\n          original_count(label);\n        };\n\n        console.countReset = (label = 'default') => {\n          if (counter.has(label)) {\n            counter.set(label, 0);\n          } else {\n            parent.postMessage(\n              {\n                action: 'console',\n                level: 'system-warn',\n                args: `Count for '${label}' does not exist`,\n              },\n              '*'\n            );\n          }\n          original_countreset(label);\n        };\n\n        const original_trace = console.trace;\n\n        console.trace = (...args) => {\n          const stack = new Error().stack;\n          parent.postMessage(\n            { action: 'console', level: 'trace', args, stack },\n            '*'\n          );\n          original_trace(...args);\n        };\n\n        function stringify(args) {\n          try {\n            return JSON.stringify(args);\n          } catch (error) {\n            return null;\n          }\n        }\n      })(this);\n\n      // remove alert, set window context\n      (() => {\n        const original_alert = window.alert;\n        window.alert = function () {};\n\n        window.context = {\n          nft_json: {},\n          config: {},\n          owner: '0x0000000000000000000000000000000000000000',\n        };\n      })(this);\n    <\/script>\n    <style>\n      body,\n      html {\n        padding: 0;\n        margin: 0;\n        min-width: 100%;\n        min-height: 100%;\n      }\n\n      body {\n        position: absolute;\n        top: 0;\n        left: 0;\n      }\n    </style>\n  </head>\n  <body>\n    \x3c!-- NFTCODE --\x3e\n  </body>\n</html>\n")),tn(t,"class","svelte-uaiew6"),on(t,"greyed-out",n[3]||Rn||n[2]),tn(e,"class","beyondnft__sandbox svelte-uaiew6")},m(o,s){X(o,e,s),V(e,t),n[10](t),V(e,r),i&&i.m(e,null)},p(n,[r]){1&r&&o!==(o=`allow-scripts allow-pointer-lock allow-popups allow-downloads ${n[0]}`)&&tn(t,"sandbox",o),12&r&&on(t,"greyed-out",n[3]||Rn||n[2]),n[3]?i||(i=An(),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},i:G,o:G,d(t){t&&Z(e),n[10](null),i&&i.d()}}}let Rn=!1;function Ln(n,e,t){let{code:o=""}=e,{proxy:r}=e,{json:i}=e,{owner_properties:s}=e,{owner:a}=e,{sandbox_props:c=""}=e;const l=ln();let d,u,p,f=0,h=[],m=[],g=h;function _(n){t(3,u=n),l("error",n)}function w(n){g.push(p=n),h=h}function y(n,e){const t={level:"group",label:n,collapsed:e,logs:[]};g.push(t),m.push(g),g=t.logs,h=h}return cn((()=>(t(5,r=new Un(d,{on_fetch_progress:n=>{t(2,f=n)},on_error:n=>{w({level:"error",args:[n.value]}),_(n.value)},on_unhandled_rejection:n=>{let e=n.value;"string"==typeof e&&(e={message:e}),e.message="Uncaught (in promise): "+e.message,w({level:"error",args:[e]}),_(e)},on_console:n=>{"clear"===n.level?(g=h=[],w(n)):n.duplicate?function(){const n=g[g.length-1];n?(n.count=(n.count||1)+1,h=h):(p.count=1,w(p))}():w(n)},on_console_group:n=>{y(n.label,!1)},on_console_group_end:()=>{g=m.pop()},on_console_group_collapsed:n=>{y(n.label,!0)}})),d.addEventListener("load",(()=>{r.handle_links(),!u&&l("loaded")})),()=>{r.destroy()}))),n.$$set=n=>{"code"in n&&t(6,o=n.code),"proxy"in n&&t(5,r=n.proxy),"json"in n&&t(7,i=n.json),"owner_properties"in n&&t(8,s=n.owner_properties),"owner"in n&&t(9,a=n.owner),"sandbox_props"in n&&t(0,c=n.sandbox_props)},[c,d,f,u,function(n){let e=i.interactive_nft?function(n){let e="";if(Array.isArray(n))for(const t of n){const n=t.type;"script"===n?e+=`<script type="text/javascript" src="${t.url}"><\/script>`:"style"===n?e+=`<script type="text/javascript">\n\t\t\t\t\t\t(() => {\n\t\t\t\t\t\t\tconst link = document.createElement('link');\n\t\t\t\t\t\t\tlink.rel = 'stylesheet';\n\t\t\t\t\t\t\tlink.href = "${t.url}";\n\t\t\t\t\t\t\tdocument.body.appendChild(link);\n\t\t\t\t\t\t})()\n\t\t\t\t\t<\/script>`:console.log(`Unknown dependency type ${n}`)}return e}(i.interactive_nft.dependencies):"";const t=function(){const n={};if(i.interactive_nft&&Array.isArray(i.interactive_nft.properties)){let e={};s&&"object"==typeof s&&(e=s);for(const t of i.interactive_nft.properties)n[t.name]=t.value,void 0!==e[t.name]&&(n[t.name]=e[t.name])}return n}();return e+=`<script type="text/javascript">\n      // specific p5 because it's causing troubles.\n      if (typeof p5 !== 'undefined' && p5.disableFriendlyErrors) {\n        p5.disableFriendlyErrors = true;\n        new p5();\n      }\n\n      ${`\n      window.context.properties = JSON.parse('${JSON.stringify(t)}');\n    `}\n      ${`\n      window.context.nft_json = JSON.parse(${JSON.stringify(JSON.stringify(i))});\n    `}\n      ${`window.context.owner = ${JSON.stringify(a)};`}\n    <\/script>`,e+=o,n.replace("\x3c!-- NFTCODE --\x3e",e)},r,o,i,s,a,function(n){pn[n?"unshift":"push"]((()=>{d=n,t(1,d)}))}]}class Fn extends Nn{constructor(n){var e;super(),document.getElementById("svelte-uaiew6-style")||((e=nn("style")).id="svelte-uaiew6-style",e.textContent=".beyondnft__sandbox.svelte-uaiew6{background-color:white;border:none;width:100%;height:100%;position:relative}iframe.svelte-uaiew6{min-width:100%;min-height:100%;border:none;display:block}.greyed-out.svelte-uaiew6{filter:grayscale(50%) blur(1px);opacity:0.25}.beyondnft__sandbox__error.svelte-uaiew6{font-size:0.9em;position:absolute;top:0;left:0;padding:5px}",V(document.head,e)),Mn(this,n,Ln,Sn,Q,{code:6,proxy:5,json:7,owner_properties:8,owner:9,sandbox_props:0})}}function Pn(n){let e;return{c(){e=en("Loading...")},m(n,t){X(n,e,t)},p:G,i:G,o:G,d(n){n&&Z(e)}}}function zn(n){let e,t,o;function r(e){n[8](e)}let i={code:n[1],owner_properties:n[2],sandbox_props:n[4],owner:n[3],json:n[0]};return void 0!==n[5]&&(i.proxy=n[5]),e=new Fn({props:i}),pn.push((()=>function(n,e,t){const o=n.$$.props.proxy;void 0!==o&&(n.$$.bound[o]=t,t(n.$$.ctx[o]))}(e,0,r))),e.$on("loaded",n[9]),e.$on("error",n[10]),e.$on("warning",n[11]),{c(){var n;(n=e.$$.fragment)&&n.c()},m(n,t){Cn(e,n,t),o=!0},p(n,o){const r={};var i;2&o&&(r.code=n[1]),4&o&&(r.owner_properties=n[2]),16&o&&(r.sandbox_props=n[4]),8&o&&(r.owner=n[3]),1&o&&(r.json=n[0]),!t&&32&o&&(t=!0,r.proxy=n[5],i=()=>t=!1,hn.push(i)),e.$set(r)},i(n){o||(xn(e.$$.fragment,n),o=!0)},o(n){En(e.$$.fragment,n),o=!1},d(n){In(e,n)}}}function Jn(n){let e,t,o,r;const i=[zn,Pn],s=[];function a(n,e){return n[1]?0:1}return e=a(n),t=s[e]=i[e](n),{c(){t.c(),o=en("")},m(n,t){s[e].m(n,t),X(n,o,t),r=!0},p(n,[r]){let c=e;e=a(n),e===c?s[e].p(n,r):(kn={r:0,c:[],p:kn},En(s[c],1,1,(()=>{s[c]=null})),kn.r||q(kn.c),kn=kn.p,t=s[e],t?t.p(n,r):(t=s[e]=i[e](n),t.c()),xn(t,1),t.m(o.parentNode,o))},i(n){r||(xn(t),r=!0)},o(n){En(t),r=!1},d(n){s[e].d(n),n&&Z(o)}}}function Wn(n,e,t){const o=ln();let{data:r={}}=e,{code:i=""}=e,{owner_properties:s={}}=e,{owner:a="0x0000000000000000000000000000000000000000"}=e,{sandbox_props:c=""}=e,l=null;return cn((async()=>{"string"==typeof r&&await fetch(r).then((n=>n.json())).then((n=>t(0,r=n))).catch((n=>{o("warning",new Error(`Error while fetching NFT's JSON at ${r}`)),t(0,r=null)})),r?(s&&"string"==typeof s&&await fetch(s).then((n=>n.json())).then((n=>t(2,s=n))).catch((n=>{o("warning",`Error while fetching owner_properties on ${s}.\n            Setting owner_properties to default.`),t(2,s={})})),!i&&r.interactive_nft&&(r.interactive_nft.code?(t(1,i=r.interactive_nft.code),t(0,r.interactive_nft.code=null,r)):r.interactive_nft.code_uri&&await fetch(r.interactive_nft.code_uri).then((n=>n.text())).then((n=>t(1,i=n))).catch((n=>{o("Error",new Error(`Error while fetching ${r.interactive_nft.code_uri}`))}))),i||o("Error",new Error("You need to provide code for this NFT to run"))):o("error",new Error("You need to provide a data property.\n      Either a valid uri to the NFT JSON or the parsed NFT JSON."))})),n.$$set=n=>{"data"in n&&t(0,r=n.data),"code"in n&&t(1,i=n.code),"owner_properties"in n&&t(2,s=n.owner_properties),"owner"in n&&t(3,a=n.owner),"sandbox_props"in n&&t(4,c=n.sandbox_props)},[r,i,s,a,c,l,"0.0.8",function(){return l},function(n){l=n,t(5,l)},function(e){dn(n,e)},function(e){dn(n,e)},function(e){dn(n,e)}]}class Bn extends Nn{constructor(n){super(),Mn(this,n,Wn,Jn,Q,{data:0,code:1,owner_properties:2,owner:3,sandbox_props:4,version:6,getProxy:7})}get version(){return this.$$.ctx[6]}get getProxy(){return this.$$.ctx[7]}}function Dn(n){let e,t;function o(n,e){return n[2].interactive_nft?Yn:Kn}let r=o(n),i=r(n);return{c(){e=l("div"),i.c(),u(e,"class","beyondembeddable__wrapper svelte-nmdk5u"),u(e,"style",t=`width: ${n[4]}; height: ${n[5]}`),p(e,"fitContent",n[0])},m(n,t){a(n,e,t),i.m(e,null)},p(n,s){r===(r=o(n))&&i?i.p(n,s):(i.d(1),i=r(n),i&&(i.c(),i.m(e,null))),48&s&&t!==(t=`width: ${n[4]}; height: ${n[5]}`)&&u(e,"style",t),1&s&&p(e,"fitContent",n[0])},d(n){n&&c(e),i.d()}}}function Gn(e){let t;return{c(){t=d("Loading...")},m(n,e){a(n,t,e)},p:n,d(n){n&&c(t)}}}function Kn(n){let e,t,o;return{c(){e=l("img"),u(e,"class","beyondembeddable__fallback svelte-nmdk5u"),e.src!==(t=D.process(n[2].image))&&u(e,"src",t),u(e,"alt",o=n[2].name)},m(n,t){a(n,e,t)},p(n,r){4&r&&e.src!==(t=D.process(n[2].image))&&u(e,"src",t),4&r&&o!==(o=n[2].name)&&u(e,"alt",o)},d(n){n&&c(e)}}}function Yn(e){let t;return{c(){t=l("div"),u(t,"class","beyondembeddable__sandbox svelte-nmdk5u")},m(n,o){a(n,t,o),e[11](t)},p:n,d(n){n&&c(t),e[11](null)}}}function qn(e){let t;function o(n,e){return n[1]?Dn:Gn}let r=o(e),i=r(e);return{c(){i.c(),t=d("")},m(n,e){i.m(n,e),a(n,t,e)},p(n,[e]){r===(r=o(n))&&i?i.p(n,e):(i.d(1),i=r(n),i&&(i.c(),i.m(t.parentNode,t)))},i:n,o:n,d(n){i.d(n),n&&c(t)}}}function Hn(n,e,t){let{owner:o}=e,{uris:r}=e,{fitContent:i}=e,{width:s="100%"}=e,{height:a="100%"}=e;const c=g();let l,d,u,p,f,h=!1,_={},y=s,b=a;function v(){t(2,l.interactive_nft.code_uri=D.process(l.interactive_nft.code_uri),l);const n={data:l};o&&(n.owner=o),_&&(n.owner_properties=_),t(10,f=new Bn({target:d,props:n})),f.$on("loaded",(async n=>{p=f.getProxy(),u=await p.size(),console.log(u),p.iframe.width=u.width,p.iframe.height=u.height,i&&function(){let n=Math.floor(100*parseInt(s)/u.width)/100,e=Math.floor(100*parseInt(a)/u.height)/100,o=Math.min(n,e);console.log(n,e),t(3,d.style.transform=`scale(${o}, ${o})`,d)}(),c("loaded",{size:u})})),f.$on("error",(n=>{c("error",n.detail)}))}var $;return $=async()=>{try{let n;r.tokenURI&&(n=await fetch(D.process(r.tokenURI)),t(2,l=await n.json())),r.interactiveConfURI&&(n=await fetch(D.process(r.interactiveConfURI)),_=await n.json()),t(1,h=!0)}catch(n){c("error","Error while loading NFT JSONs.")}},m().$$.on_mount.push($),n.$$set=n=>{"owner"in n&&t(6,o=n.owner),"uris"in n&&t(7,r=n.uris),"fitContent"in n&&t(0,i=n.fitContent),"width"in n&&t(8,s=n.width),"height"in n&&t(9,a=n.height)},n.$$.update=()=>{1038&n.$$.dirty&&h&&d&&l.interactive_nft&&!f&&v()},[i,h,l,d,y,b,o,r,s,a,f,function(n){w[n?"unshift":"push"]((()=>{d=n,t(3,d)}))}]}class Qn extends R{constructor(n){var e;super(),document.getElementById("svelte-nmdk5u-style")||((e=l("style")).id="svelte-nmdk5u-style",e.textContent=".beyondembeddable__wrapper.svelte-nmdk5u{position:relative}.beyondembeddable__sandbox.svelte-nmdk5u{width:100%;height:100%;transform-origin:top left}.beyondembeddable__sandbox.svelte-nmdk5u{position:absolute;top:0;left:0;right:0;bottom:0;min-width:100%;min-height:100%;z-index:1}img.svelte-nmdk5u{width:100%;height:auto}",s(document.head,e)),S(this,n,Hn,qn,i,{owner:6,uris:7,fitContent:0,width:8,height:9})}}function Vn(n){let e,t;return e=new Qn({props:{owner:n[0],uris:n[4],fitContent:n[1],width:n[2],height:n[3]}}),e.$on("loaded",n[12]),e.$on("error",n[13]),{c(){var n;(n=e.$$.fragment)&&n.c()},m(n,o){O(e,n,o),t=!0},p(n,t){const o={};1&t&&(o.owner=n[0]),16&t&&(o.uris=n[4]),2&t&&(o.fitContent=n[1]),4&t&&(o.width=n[2]),8&t&&(o.height=n[3]),e.$set(o)},i(n){t||(j(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){U(e,n)}}}function Xn(e){let t,o;return{c(){t=l("p"),o=d(e[6]),u(t,"class","beyondembeddable__error")},m(n,e){a(n,t,e),s(t,o)},p(n,e){64&e&&function(n,e){e=""+e,n.wholeText!==e&&(n.data=e)}(o,n[6])},i:n,o:n,d(n){n&&c(t)}}}function Zn(n){let e,t,r,i;const s=[Xn,Vn],d=[];function p(n,e){return n[6]?0:n[5]?1:-1}return~(t=p(n))&&(r=d[t]=s[t](n)),{c(){e=l("div"),r&&r.c(),u(e,"class","beyondembeddable")},m(n,o){a(n,e,o),~t&&d[t].m(e,null),i=!0},p(n,[i]){let a=t;t=p(n),t===a?~t&&d[t].p(n,i):(r&&(N={r:0,c:[],p:N},T(d[a],1,1,(()=>{d[a]=null})),N.r||o(N.c),N=N.p),~t?(r=d[t],r?r.p(n,i):(r=d[t]=s[t](n),r.c()),j(r,1),r.m(e,null)):r=null)},i(n){i||(j(r),i=!0)},o(n){T(r),i=!1},d(n){n&&c(e),~t&&d[t].d()}}}function ne(n,e,t){let{contract:o}=e,{tokenId:r=null}=e,{owner:i=null}=e,{network:s=z.mainnet}=e,{fitContent:a=!0}=e,{width:c="388px"}=e,{height:l="560px"}=e,{ipfsGateway:d="https://gateway.ipfs.io/"}=e;let u=z.mainnet;u="string"==typeof s&&z[s]?z[s]:parseInt(s);let p,f,h,m=!1;return n.$$set=n=>{"contract"in n&&t(7,o=n.contract),"tokenId"in n&&t(8,r=n.tokenId),"owner"in n&&t(0,i=n.owner),"network"in n&&t(9,s=n.network),"fitContent"in n&&t(1,a=n.fitContent),"width"in n&&t(2,c=n.width),"height"in n&&t(3,l=n.height),"ipfsGateway"in n&&t(10,d=n.ipfsGateway)},n.$$.update=()=>{400&n.$$.dirty&&o&&null!==r&&(h?h.tokenURI&&t(5,m=!0):async function(){try{f=new W(o,r,u),await f.connect(),t(4,h=await f.uris())}catch(n){t(6,p=n.message)}}()),1024&n.$$.dirty&&D.init(d)},[i,a,c,l,h,m,p,o,r,s,d,"0.0.4",function(e){!function(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach((n=>n(e)))}(n,e)},n=>t(6,p=n.detail.message)]}export default class extends R{constructor(n){super(),S(this,n,ne,Zn,i,{contract:7,tokenId:8,owner:0,network:9,fitContent:1,width:2,height:3,ipfsGateway:10,version:11})}get version(){return this.$$.ctx[11]}}
