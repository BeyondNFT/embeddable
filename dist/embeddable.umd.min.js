!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).Embeddable=n()}(this,(function(){"use strict";function e(){}function n(e){return e()}function t(){return Object.create(null)}function o(e){e.forEach(n)}function r(e){return"function"==typeof e}function s(e,n){return e!=e?n==n:e!==n||e&&"object"==typeof e||"function"==typeof e}function i(e,n){e.appendChild(n)}function a(e,n,t){e.insertBefore(n,t||null)}function c(e){e.parentNode.removeChild(e)}function l(e){return document.createElement(e)}function d(e){return document.createTextNode(e)}function u(){return d("")}function p(e,n,t){null==t?e.removeAttribute(n):e.getAttribute(n)!==t&&e.setAttribute(n,t)}function f(e,n,t){e.classList[t?"add":"remove"](n)}let h;function m(e){h=e}function g(){if(!h)throw new Error("Function called outside component initialization");return h}function _(){const e=g();return(n,t)=>{const o=e.$$.callbacks[n];if(o){const r=function(e,n){const t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,n),t}(n,t);o.slice().forEach((n=>{n.call(e,r)}))}}}const b=[],w=[],y=[],v=[],$=Promise.resolve();let k=!1;function x(e){y.push(e)}let E=!1;const M=new Set;function N(){if(!E){E=!0;do{for(let e=0;e<b.length;e+=1){const n=b[e];m(n),j(n.$$)}for(m(null),b.length=0;w.length;)w.pop()();for(let e=0;e<y.length;e+=1){const n=y[e];M.has(n)||(M.add(n),n())}y.length=0}while(b.length);for(;v.length;)v.pop()();k=!1,E=!1,M.clear()}}function j(e){if(null!==e.fragment){e.update(),o(e.before_update);const n=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,n),e.after_update.forEach(x)}}const C=new Set;let I;function z(e,n){e&&e.i&&(C.delete(e),e.i(n))}function T(e,n,t,o){if(e&&e.o){if(C.has(e))return;C.add(e),I.c.push((()=>{C.delete(e),o&&(t&&e.d(1),o())})),e.o(n)}}function O(e,t,s){const{fragment:i,on_mount:a,on_destroy:c,after_update:l}=e.$$;i&&i.m(t,s),x((()=>{const t=a.map(n).filter(r);c?c.push(...t):o(t),e.$$.on_mount=[]})),l.forEach(x)}function A(e,n){const t=e.$$;null!==t.fragment&&(o(t.on_destroy),t.fragment&&t.fragment.d(n),t.on_destroy=t.fragment=null,t.ctx=[])}function U(e,n){-1===e.$$.dirty[0]&&(b.push(e),k||(k=!0,$.then(N)),e.$$.dirty.fill(0)),e.$$.dirty[n/31|0]|=1<<n%31}function R(n,r,s,i,a,l,d=[-1]){const u=h;m(n);const p=r.props||{},f=n.$$={fragment:null,ctx:null,props:l,update:e,not_equal:a,bound:t(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:t(),dirty:d,skip_bound:!1};let g=!1;if(f.ctx=s?s(n,p,((e,t,...o)=>{const r=o.length?o[0]:t;return f.ctx&&a(f.ctx[e],f.ctx[e]=r)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](r),g&&U(n,e)),t})):[],f.update(),g=!0,o(f.before_update),f.fragment=!!i&&i(f.ctx),r.target){if(r.hydrate){const e=function(e){return Array.from(e.childNodes)}(r.target);f.fragment&&f.fragment.l(e),e.forEach(c)}else f.fragment&&f.fragment.c();r.intro&&z(n.$$.fragment),O(n,r.target,r.anchor),N()}m(u)}class S{$destroy(){A(this,1),this.$destroy=e}$on(e,n){const t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(n),()=>{const e=t.indexOf(n);-1!==e&&t.splice(e,1)}}$set(e){var n;this.$$set&&(n=e,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var L=[{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"interactiveConfURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function",constant:!0}];async function F(){Web3&&"1.3.0"===Web3.version||await async function(){return new Promise(((e,n)=>{const t="https://cdnjs.cloudflare.com/ajax/libs/web3/1.3.0/web3.min.js",o=document.createElement("script");o.onload=e,o.onerror=n,o.src=t,document.body.appendChild(o)}))}();const e=await function({mustBeMetaMask:e=!1,silent:n=!1,timeout:t=3e3}={}){!function(){if("boolean"!=typeof e)throw new Error("@metamask/detect-provider: Expected option 'mustBeMetaMask' to be a boolean.");if("boolean"!=typeof n)throw new Error("@metamask/detect-provider: Expected option 'silent' to be a boolean.");if("number"!=typeof t)throw new Error("@metamask/detect-provider: Expected option 'timeout' to be a number.")}();let o=!1;return new Promise((r=>{function s(){if(o)return;o=!0,window.removeEventListener("ethereum#initialized",s);const{ethereum:t}=window;if(!t||e&&!t.isMetaMask){const o=e&&t?"Non-MetaMask window.ethereum detected.":"Unable to detect window.ethereum.";!n&&console.error("@metamask/detect-provider:",o),r(null)}else r(t)}window.ethereum?s():(window.addEventListener("ethereum#initialized",s,{once:!0}),setTimeout((()=>{s()}),t))}))}();if(e){return{web3:new Web3(e),provider:e}}throw new Error("\n\t\t\tNo ethereum provider detected.\n\t\t\tPlease install Metamask or any other wallet (Polaris, Trust Wallet...).\n\t\t")}class J{constructor(e,n,t){this.address=e,this.tokenId=n,this.chaindId=t,this.web3,this.provider}async connect(){const e=await F();this.web3=e.web3,this.provider=e.provider;let n=await this.web3.eth.net.getId();if(n!==this.chaindId)throw new Error(`Connected to the wrong network. Current{${n}}; Expected{${this.chaindId}}`);this.instance=await async function(e,n){return new e.eth.Contract(L,n)}(this.web3,this.address)}async uris(){try{const e=await this.tokenURI();let n="";try{n=await this.interactiveConfURI()}catch(e){}return{tokenURI:e,interactiveConfURI:n}}catch(e){console.log(e)}}async tokenURI(){return this.instance.methods.tokenURI(this.tokenId).call()}async interactiveConfURI(){return this.instance.methods.interactiveConfURI(this.tokenId).call()}}var P={mainnet:1,ropsten:3,rinkeby:4,goerli:5,kovan:42};function W(){}function B(e){return e()}function D(){return Object.create(null)}function K(e){e.forEach(B)}function Y(e){return"function"==typeof e}function q(e,n){return e!=e?n==n:e!==n||e&&"object"==typeof e||"function"==typeof e}function H(e,n){e.appendChild(n)}function G(e,n,t){e.insertBefore(n,t||null)}function Q(e){e.parentNode.removeChild(e)}function V(e){return document.createElement(e)}function X(e){return document.createTextNode(e)}function Z(e,n,t){null==t?e.removeAttribute(n):e.getAttribute(n)!==t&&e.setAttribute(n,t)}function ee(e,n,t){e.classList[t?"add":"remove"](n)}let ne;function te(e){ne=e}function oe(){if(!ne)throw new Error("Function called outside component initialization");return ne}function re(e){oe().$$.on_mount.push(e)}function se(){const e=oe();return(n,t)=>{const o=e.$$.callbacks[n];if(o){const r=function(e,n){const t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,n),t}(n,t);o.slice().forEach((n=>{n.call(e,r)}))}}}function ie(e,n){const t=e.$$.callbacks[n.type];t&&t.slice().forEach((e=>e(n)))}const ae=[],ce=[],le=[],de=[],ue=Promise.resolve();let pe=!1;function fe(e){le.push(e)}let he=!1;const me=new Set;function ge(){if(!he){he=!0;do{for(let e=0;e<ae.length;e+=1){const n=ae[e];te(n),_e(n.$$)}for(te(null),ae.length=0;ce.length;)ce.pop()();for(let e=0;e<le.length;e+=1){const n=le[e];me.has(n)||(me.add(n),n())}le.length=0}while(ae.length);for(;de.length;)de.pop()();pe=!1,he=!1,me.clear()}}function _e(e){if(null!==e.fragment){e.update(),K(e.before_update);const n=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,n),e.after_update.forEach(fe)}}const be=new Set;let we;function ye(e,n){e&&e.i&&(be.delete(e),e.i(n))}function ve(e,n,t,o){if(e&&e.o){if(be.has(e))return;be.add(e),we.c.push((()=>{be.delete(e),o&&(t&&e.d(1),o())})),e.o(n)}}function $e(e,n,t){const{fragment:o,on_mount:r,on_destroy:s,after_update:i}=e.$$;o&&o.m(n,t),fe((()=>{const n=r.map(B).filter(Y);s?s.push(...n):K(n),e.$$.on_mount=[]})),i.forEach(fe)}function ke(e,n){const t=e.$$;null!==t.fragment&&(K(t.on_destroy),t.fragment&&t.fragment.d(n),t.on_destroy=t.fragment=null,t.ctx=[])}function xe(e,n,t,o,r,s,i=[-1]){const a=ne;te(e);const c=n.props||{},l=e.$$={fragment:null,ctx:null,props:s,update:W,not_equal:r,bound:D(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:D(),dirty:i,skip_bound:!1};let d=!1;if(l.ctx=t?t(e,c,((n,t,...o)=>{const s=o.length?o[0]:t;return l.ctx&&r(l.ctx[n],l.ctx[n]=s)&&(!l.skip_bound&&l.bound[n]&&l.bound[n](s),d&&function(e,n){-1===e.$$.dirty[0]&&(ae.push(e),pe||(pe=!0,ue.then(ge)),e.$$.dirty.fill(0)),e.$$.dirty[n/31|0]|=1<<n%31}(e,n)),t})):[],l.update(),d=!0,K(l.before_update),l.fragment=!!o&&o(l.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);l.fragment&&l.fragment.l(e),e.forEach(Q)}else l.fragment&&l.fragment.c();n.intro&&ye(e.$$.fragment),$e(e,n.target,n.anchor),ge()}te(a)}class Ee{$destroy(){ke(this,1),this.$destroy=W}$on(e,n){const t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(n),()=>{const e=t.indexOf(n);-1!==e&&t.splice(e,1)}}$set(e){var n;this.$$set&&(n=e,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}let Me=1;function Ne(e){let n=e.action,t=e.cmd_id,o=this.pending_cmds.get(t);if(o){if(this.pending_cmds.delete(t),"cmd_error"===n){let{message:n,stack:t}=e,r=new Error(n);r.stack=t,o.reject(r)}"cmd_ok"===n&&o.resolve(e.args||"ok")}else console.error("command not found",t,e,[...this.pending_cmds.keys()])}function je(e){if(e.source!==this.iframe.contentWindow)return;const{action:n,args:t}=e.data;switch(n){case"cmd_error":case"cmd_ok":return Ne.call(this,e.data);case"fetch_progress":return this.handlers.on_fetch_progress(t.remaining);case"error":return this.handlers.on_error(e.data);case"unhandledrejection":return this.handlers.on_unhandled_rejection(e.data);case"console":return this.handlers.on_console(e.data);case"console_group":return this.handlers.on_console_group(e.data);case"console_group_collapsed":return this.handlers.on_console_group_collapsed(e.data);case"console_group_end":return this.handlers.on_console_group_end(e.data);default:const o="on_"+n;"function"==typeof this.handlers[o]&&this.handlers[o](e.data)}}class Ce{constructor(e,n){this.iframe=e,this.handlers=n,this.pending_cmds=new Map,this.handle_event=je.bind(this),window.addEventListener("message",this.handle_event,!1)}destroy(){window.removeEventListener("message",this.handle_event)}iframe_command(e,n){return new Promise(((t,o)=>{const r=Me++;this.pending_cmds.set(r,{resolve:t,reject:o}),this.iframe.contentWindow.postMessage({action:e,cmd_id:r,args:n},"*")}))}eval(e){return this.iframe_command("eval",{script:e})}add_script(e){return this.iframe_command("add_script",e)}add_script_content(e){return this.iframe_command("add_script_content",e)}add_style(e){return this.iframe_command("add_style",e)}add_asset(e){return this.iframe_command("add_asset",e)}handle_links(){return this.iframe_command("catch_clicks",{})}}function Ie(e){let n;return{c(){n=V("strong"),n.innerHTML="<em>Sorry, an error occured while executing the NFT.</em>",Z(n,"class","beyondnft__sandbox__error svelte-1bwdt9k")},m(e,t){G(e,n,t)},d(e){e&&Q(n)}}}function ze(e){let n,t,o,r,s,i=e[3]&&Ie();return{c(){n=V("div"),t=V("iframe"),s=X(" "),i&&i.c(),Z(t,"title","Sandbox"),Z(t,"sandbox",o="allow-scripts allow-pointer-lock allow-popups "+e[0]),Z(t,"srcdoc",r=e[4]("<!DOCTYPE html>\n<html>\n  <head>\n    <style>\n      \n    </style>\n\n    <script>\n      (function () {\n        const local_eval = eval;\n        eval = function () {};\n\n        function handle_message(ev) {\n          let { action, cmd_id } = ev.data;\n          const send_message = (payload) =>\n            parent.postMessage({ ...payload }, ev.origin);\n\n          const send_reply = (payload) => send_message({ ...payload, cmd_id });\n          const send_ok = (args) => send_reply({ action: 'cmd_ok', args });\n          const send_error = (message, stack) =>\n            send_reply({ action: 'cmd_error', message, stack });\n\n          if (action === 'eval') {\n            try {\n              const { script } = ev.data.args;\n              local_eval(script);\n              send_ok();\n            } catch (e) {\n              send_error(e.message, e.stack);\n            }\n          }\n\n          if (action === 'add_script') {\n            try {\n              const script = document.createElement('script');\n              script.src = ev.data.args;\n              script.onload = () => send_ok();\n              document.body.appendChild(script);\n            } catch (e) {\n              send_error(e.message, e.stack);\n            }\n          }\n\n          if (action === 'add_script_content') {\n            try {\n              const script = document.createElement('script');\n              script.text = ev.data.args;\n              script.type = 'text/javascript';\n              document.body.appendChild(script);\n              send_ok();\n            } catch (e) {\n              send_error(e.message, e.stack);\n            }\n          }\n\n          if (action === 'add_style') {\n            try {\n              const link = document.createElement('link');\n              link.rel = 'stylesheet';\n              link.href = ev.data.args;\n              link.onload = () => send_ok();\n              document.body.appendChild(link);\n            } catch (e) {\n              send_error(e.message, e.stack);\n            }\n          }\n\n          if (action === 'catch_clicks') {\n            try {\n              const top_origin = ev.origin;\n              document.body.addEventListener('click', (event) => {\n                if (event.which !== 1) return;\n                if (event.metaKey || event.ctrlKey || event.shiftKey) return;\n                if (event.defaultPrevented) return;\n\n                // ensure target is a link\n                let el = event.target;\n                while (el && el.nodeName !== 'A') el = el.parentNode;\n                if (!el || el.nodeName !== 'A') return;\n\n                if (\n                  el.hasAttribute('download') ||\n                  el.getAttribute('rel') === 'external' ||\n                  el.target\n                )\n                  return;\n\n                event.preventDefault();\n\n                if (el.href.startsWith(top_origin)) {\n                  const url = new URL(el.href);\n                  if (url.hash[0] === '#') {\n                    window.location.hash = url.hash;\n                    return;\n                  }\n                }\n\n                window.open(el.href, '_blank');\n              });\n              send_ok();\n            } catch (e) {\n              send_error(e.message, e.stack);\n            }\n          }\n        }\n\n        window.addEventListener('message', handle_message, false);\n\n        window.onerror = function (msg, url, lineNo, columnNo, error) {\n          try {\n            parent.postMessage({ action: 'error', value: error }, '*');\n          } catch (e) {\n            parent.postMessage({ action: 'error', value: msg }, '*');\n            parent.postMessage({ action: 'error', value: error }, '*');\n          }\n        };\n\n        window.addEventListener('unhandledrejection', (event) => {\n          parent.postMessage(\n            { action: 'unhandledrejection', value: event.reason },\n            '*'\n          );\n        });\n\n        let previous = { level: null, args: null };\n\n        ['clear', 'log', 'info', 'dir', 'warn', 'error', 'table'].forEach(\n          (level) => {\n            const original = console[level];\n            console[level] = (...args) => {\n              const stringifiedArgs = stringify(args);\n              if (\n                previous.level === level &&\n                previous.args &&\n                previous.args === stringifiedArgs\n              ) {\n                parent.postMessage(\n                  { action: 'console', level, duplicate: true },\n                  '*'\n                );\n              } else {\n                previous = { level, args: stringifiedArgs };\n\n                try {\n                  parent.postMessage({ action: 'console', level, args }, '*');\n                } catch (err) {\n                  parent.postMessage(\n                    { action: 'console', level: 'unclonable' },\n                    '*'\n                  );\n                }\n              }\n\n              original(...args);\n            };\n          }\n        );\n\n        [\n          { method: 'group', action: 'console_group' },\n          { method: 'groupEnd', action: 'console_group_end' },\n          { method: 'groupCollapsed', action: 'console_group_collapsed' },\n        ].forEach((group_action) => {\n          const original = console[group_action.method];\n          console[group_action.method] = (label) => {\n            parent.postMessage({ action: group_action.action, label }, '*');\n\n            original(label);\n          };\n        });\n\n        const timers = new Map();\n        const original_time = console.time;\n        const original_timelog = console.timeLog;\n        const original_timeend = console.timeEnd;\n\n        console.time = (label = 'default') => {\n          original_time(label);\n          timers.set(label, performance.now());\n        };\n        console.timeLog = (label = 'default') => {\n          original_timelog(label);\n          const now = performance.now();\n          if (timers.has(label)) {\n            parent.postMessage(\n              {\n                action: 'console',\n                level: 'system-log',\n                args: [`${label}: ${now - timers.get(label)}ms`],\n              },\n              '*'\n            );\n          } else {\n            parent.postMessage(\n              {\n                action: 'console',\n                level: 'system-warn',\n                args: [`Timer '${label}' does not exist`],\n              },\n              '*'\n            );\n          }\n        };\n        console.timeEnd = (label = 'default') => {\n          original_timeend(label);\n          const now = performance.now();\n          if (timers.has(label)) {\n            parent.postMessage(\n              {\n                action: 'console',\n                level: 'system-log',\n                args: [`${label}: ${now - timers.get(label)}ms`],\n              },\n              '*'\n            );\n          } else {\n            parent.postMessage(\n              {\n                action: 'console',\n                level: 'system-warn',\n                args: [`Timer '${label}' does not exist`],\n              },\n              '*'\n            );\n          }\n          timers.delete(label);\n        };\n\n        const original_assert = console.assert;\n        console.assert = (condition, ...args) => {\n          if (condition) {\n            const stack = new Error().stack;\n            parent.postMessage(\n              { action: 'console', level: 'assert', args, stack },\n              '*'\n            );\n          }\n          original_assert(condition, ...args);\n        };\n\n        const counter = new Map();\n        const original_count = console.count;\n        const original_countreset = console.countReset;\n\n        console.count = (label = 'default') => {\n          counter.set(label, (counter.get(label) || 0) + 1);\n          parent.postMessage(\n            {\n              action: 'console',\n              level: 'system-log',\n              args: `${label}: ${counter.get(label)}`,\n            },\n            '*'\n          );\n          original_count(label);\n        };\n\n        console.countReset = (label = 'default') => {\n          if (counter.has(label)) {\n            counter.set(label, 0);\n          } else {\n            parent.postMessage(\n              {\n                action: 'console',\n                level: 'system-warn',\n                args: `Count for '${label}' does not exist`,\n              },\n              '*'\n            );\n          }\n          original_countreset(label);\n        };\n\n        const original_trace = console.trace;\n\n        console.trace = (...args) => {\n          const stack = new Error().stack;\n          parent.postMessage(\n            { action: 'console', level: 'trace', args, stack },\n            '*'\n          );\n          original_trace(...args);\n        };\n\n        function stringify(args) {\n          try {\n            return JSON.stringify(args);\n          } catch (error) {\n            return null;\n          }\n        }\n      })(this);\n\n      // remove alert, set window context\n      (() => {\n        const original_alert = window.alert;\n        window.alert = function () {};\n\n        window.context = {\n          nft_json: {},\n          config: {},\n          owner: '0x0000000000000000000000000000000000000000',\n        };\n      })(this);\n    <\/script>\n  </head>\n  <body>\n    \x3c!-- NFTCODE --\x3e\n  </body>\n</html>\n")),Z(t,"class","svelte-1bwdt9k"),ee(t,"greyed-out",e[3]||Te||e[2]),Z(n,"class","beyondnft__sandbox svelte-1bwdt9k")},m(o,r){G(o,n,r),H(n,t),e[10](t),H(n,s),i&&i.m(n,null)},p(e,[r]){1&r&&o!==(o="allow-scripts allow-pointer-lock allow-popups "+e[0])&&Z(t,"sandbox",o),12&r&&ee(t,"greyed-out",e[3]||Te||e[2]),e[3]?i||(i=Ie(),i.c(),i.m(n,null)):i&&(i.d(1),i=null)},i:W,o:W,d(t){t&&Q(n),e[10](null),i&&i.d()}}}let Te=!1;function Oe(e,n,t){let{code:o=""}=n,{proxy:r}=n,{json:s}=n,{owner_properties:i}=n,{owner:a}=n,{sandbox_props:c=""}=n;const l=se();let d,u,p,f=0,h=[],m=[],g=h;function _(e){t(3,u=e),l("error",e)}function b(e){g.push(p=e),h=h}function w(e,n){const t={level:"group",label:e,collapsed:n,logs:[]};g.push(t),m.push(g),g=t.logs,h=h}return re((()=>(t(5,r=new Ce(d,{on_fetch_progress:e=>{t(2,f=e)},on_error:e=>{b({level:"error",args:[e.value]}),_(e.value)},on_unhandled_rejection:e=>{let n=e.value;"string"==typeof n&&(n={message:n}),n.message="Uncaught (in promise): "+n.message,b({level:"error",args:[n]}),_(n)},on_console:e=>{"clear"===e.level?(g=h=[],b(e)):e.duplicate?function(){const e=g[g.length-1];e?(e.count=(e.count||1)+1,h=h):(p.count=1,b(p))}():b(e)},on_console_group:e=>{w(e.label,!1)},on_console_group_end:()=>{g=m.pop()},on_console_group_collapsed:e=>{w(e.label,!0)}})),d.addEventListener("load",(()=>{r.handle_links(),!u&&l("loaded")})),()=>{r.destroy()}))),e.$$set=e=>{"code"in e&&t(6,o=e.code),"proxy"in e&&t(5,r=e.proxy),"json"in e&&t(7,s=e.json),"owner_properties"in e&&t(8,i=e.owner_properties),"owner"in e&&t(9,a=e.owner),"sandbox_props"in e&&t(0,c=e.sandbox_props)},[c,d,f,u,function(e){let n=s.interactive_nft?function(e){let n="";if(Array.isArray(e))for(const t of e){const e=t.type;"script"===e?n+=`<script type="text/javascript" src="${t.url}"><\/script>`:"style"===e?n+=`<script type="text/javascript">\n\t\t\t\t\t\t(() => {\n\t\t\t\t\t\t\tconst link = document.createElement('link');\n\t\t\t\t\t\t\tlink.rel = 'stylesheet';\n\t\t\t\t\t\t\tlink.href = "${t.url}";\n\t\t\t\t\t\t\tdocument.body.appendChild(link);\n\t\t\t\t\t\t})()\n\t\t\t\t\t<\/script>`:console.log("Unknown dependency type "+e)}return n}(s.interactive_nft.dependencies):"";const t=function(){const e={};if(s.interactive_nft&&Array.isArray(s.interactive_nft.properties)){let n={};i&&"object"==typeof i&&(n=i);for(const t of s.interactive_nft.properties)e[t.name]=t.value,void 0!==n[t.name]&&(e[t.name]=n[t.name])}return e}();return n+=`<script type="text/javascript">\n      // specific p5 because it's causing troubles.\n      if (typeof p5 !== 'undefined' && p5.disableFriendlyErrors) {\n        p5.disableFriendlyErrors = true;\n        new p5();\n      }\n\n      ${`\n      window.context.properties = JSON.parse('${JSON.stringify(t)}');\n    `}\n      ${`\n      window.context.nft_json = JSON.parse(${JSON.stringify(JSON.stringify(s))});\n    `}\n      ${`window.context.owner = ${JSON.stringify(a)};`}\n    <\/script>`,n+=o,e.replace("\x3c!-- NFTCODE --\x3e",n)},r,o,s,i,a,function(e){ce[e?"unshift":"push"]((()=>{d=e,t(1,d)}))}]}class Ae extends Ee{constructor(e){var n;super(),document.getElementById("svelte-1bwdt9k-style")||((n=V("style")).id="svelte-1bwdt9k-style",n.textContent=".beyondnft__sandbox.svelte-1bwdt9k{background-color:white;border:none;width:100%;height:100%;position:relative}iframe.svelte-1bwdt9k{width:100%;height:100%;border:none;display:block}.greyed-out.svelte-1bwdt9k{filter:grayscale(50%) blur(1px);opacity:0.25}.beyondnft__sandbox__error.svelte-1bwdt9k{font-size:0.9em;position:absolute;top:0;left:0;padding:5px}",H(document.head,n)),xe(this,e,Oe,ze,q,{code:6,proxy:5,json:7,owner_properties:8,owner:9,sandbox_props:0})}}function Ue(e){let n;return{c(){n=X("Loading...")},m(e,t){G(e,n,t)},p:W,i:W,o:W,d(e){e&&Q(n)}}}function Re(e){let n,t,o;function r(n){e[8].call(null,n)}let s={code:e[1],owner_properties:e[2],sandbox_props:e[4],owner:e[3],json:e[0]};return void 0!==e[5]&&(s.proxy=e[5]),n=new Ae({props:s}),ce.push((()=>function(e,n,t){const o=e.$$.props.proxy;void 0!==o&&(e.$$.bound[o]=t,t(e.$$.ctx[o]))}(n,0,r))),n.$on("loaded",e[9]),n.$on("error",e[10]),n.$on("warning",e[11]),{c(){var e;(e=n.$$.fragment)&&e.c()},m(e,t){$e(n,e,t),o=!0},p(e,o){const r={};var s;2&o&&(r.code=e[1]),4&o&&(r.owner_properties=e[2]),16&o&&(r.sandbox_props=e[4]),8&o&&(r.owner=e[3]),1&o&&(r.json=e[0]),!t&&32&o&&(t=!0,r.proxy=e[5],s=()=>t=!1,de.push(s)),n.$set(r)},i(e){o||(ye(n.$$.fragment,e),o=!0)},o(e){ve(n.$$.fragment,e),o=!1},d(e){ke(n,e)}}}function Se(e){let n,t,o,r;const s=[Re,Ue],i=[];function a(e,n){return e[1]?0:1}return n=a(e),t=i[n]=s[n](e),{c(){t.c(),o=X("")},m(e,t){i[n].m(e,t),G(e,o,t),r=!0},p(e,[r]){let c=n;n=a(e),n===c?i[n].p(e,r):(we={r:0,c:[],p:we},ve(i[c],1,1,(()=>{i[c]=null})),we.r||K(we.c),we=we.p,t=i[n],t||(t=i[n]=s[n](e),t.c()),ye(t,1),t.m(o.parentNode,o))},i(e){r||(ye(t),r=!0)},o(e){ve(t),r=!1},d(e){i[n].d(e),e&&Q(o)}}}function Le(e,n,t){const o=se();let{data:r={}}=n,{code:s=""}=n,{owner_properties:i={}}=n,{owner:a="0x0000000000000000000000000000000000000000"}=n,{sandbox_props:c=""}=n,l=null;return re((async()=>{"string"==typeof r&&await fetch(r).then((e=>e.json())).then((e=>t(0,r=e))).catch((e=>{o("warning",new Error("Error while fetching NFT's JSON at "+r)),t(0,r=null)})),r?(i&&"string"==typeof i&&await fetch(i).then((e=>e.json())).then((e=>t(2,i=e))).catch((e=>{o("warning",`Error while fetching owner_properties on ${i}.\n            Setting owner_properties to default.`),t(2,i={})})),!s&&r.interactive_nft&&(r.interactive_nft.code?(t(1,s=r.interactive_nft.code),t(0,r.interactive_nft.code=null,r)):r.interactive_nft.code_uri&&await fetch(r.interactive_nft.code_uri).then((e=>e.text())).then((e=>t(1,s=e))).catch((e=>{o("Error",new Error("Error while fetching "+r.interactive_nft.code_uri))}))),s||o("Error",new Error("You need to provide code for this NFT to run"))):o("error",new Error("You need to provide a data property.\n      Either a valid uri to the NFT JSON or the parsed NFT JSON."))})),e.$$set=e=>{"data"in e&&t(0,r=e.data),"code"in e&&t(1,s=e.code),"owner_properties"in e&&t(2,i=e.owner_properties),"owner"in e&&t(3,a=e.owner),"sandbox_props"in e&&t(4,c=e.sandbox_props)},[r,s,i,a,c,l,"0.0.4",function(){return l},function(e){l=e,t(5,l)},function(n){ie(e,n)},function(n){ie(e,n)},function(n){ie(e,n)}]}class Fe extends Ee{constructor(e){super(),xe(this,e,Le,Se,q,{data:0,code:1,owner_properties:2,owner:3,sandbox_props:4,version:6,getProxy:7})}get version(){return this.$$.ctx[6]}get getProxy(){return this.$$.ctx[7]}}function Je(e){let n,t;function o(e,n){return e[4].interactive_nft?Be:We}let r=o(e),s=r(e);return{c(){n=l("div"),s.c(),p(n,"class","beyondembeddable__wrapper svelte-lh0bc7"),p(n,"style",t=`width: ${e[1]}; height: ${e[2]}`),f(n,"resizable",e[0])},m(e,t){a(e,n,t),s.m(n,null)},p(e,i){r===(r=o(e))&&s?s.p(e,i):(s.d(1),s=r(e),s&&(s.c(),s.m(n,null))),6&i&&t!==(t=`width: ${e[1]}; height: ${e[2]}`)&&p(n,"style",t),1&i&&f(n,"resizable",e[0])},d(e){e&&c(n),s.d()}}}function Pe(n){let t;return{c(){t=d("Loading...")},m(e,n){a(e,t,n)},p:e,d(e){e&&c(t)}}}function We(e){let n,t,o;return{c(){n=l("img"),p(n,"class","beyondembeddable__fallback svelte-lh0bc7"),n.src!==(t=e[4].image.replace("ipfs://","https://gateway.ipfs.io/"))&&p(n,"src",t),p(n,"alt",o=e[4].name)},m(e,t){a(e,n,t)},p(e,r){16&r&&n.src!==(t=e[4].image.replace("ipfs://","https://gateway.ipfs.io/"))&&p(n,"src",t),16&r&&o!==(o=e[4].name)&&p(n,"alt",o)},d(e){e&&c(n)}}}function Be(e){let n,t,o,r=e[0]&&De();return{c(){n=l("div"),t=d(" "),r&&r.c(),o=u(),p(n,"class","beyondembeddable__sandbox svelte-lh0bc7")},m(s,i){a(s,n,i),e[8](n),a(s,t,i),r&&r.m(s,i),a(s,o,i)},p(e,n){e[0]?r||(r=De(),r.c(),r.m(o.parentNode,o)):r&&(r.d(1),r=null)},d(s){s&&c(n),e[8](null),s&&c(t),r&&r.d(s),s&&c(o)}}}function De(e){let n;return{c(){n=l("em"),n.textContent="resize if needed",p(n,"class","svelte-lh0bc7")},m(e,t){a(e,n,t)},d(e){e&&c(n)}}}function Ke(n){let t;function o(e,n){return e[3]?Je:Pe}let r=o(n),s=r(n);return{c(){s.c(),t=u()},m(e,n){s.m(e,n),a(e,t,n)},p(e,[n]){r===(r=o(e))&&s?s.p(e,n):(s.d(1),s=r(e),s&&(s.c(),s.m(t.parentNode,t)))},i:e,o:e,d(e){s.d(e),e&&c(t)}}}function Ye(e,n,t){let{owner:o}=n,{uris:r}=n,{resizable:s}=n,{width:i}=n,{height:a}=n;const c=_();let l,d,u=!1,p={};var f;return f=async()=>{try{let e;r.tokenURI&&(e=await fetch(r.tokenURI),t(4,l=await e.json())),r.interactiveConfURI&&(e=await fetch(r.interactiveConfURI),t(9,p=await e.json())),t(3,u=!0)}catch(e){c("error","Error while loading NFT JSONs.")}},g().$$.on_mount.push(f),e.$$set=e=>{"owner"in e&&t(6,o=e.owner),"uris"in e&&t(7,r=e.uris),"resizable"in e&&t(0,s=e.resizable),"width"in e&&t(1,i=e.width),"height"in e&&t(2,a=e.height)},e.$$.update=()=>{if(632&e.$$.dirty&&u&&d&&l.interactive_nft){const e={data:l};o&&(e.owner=o),p&&(e.owner_properties=p);new Fe({target:d,props:e}).$on("error",(e=>{c("error",e.detail)}))}},[s,i,a,u,l,d,o,r,function(e){w[e?"unshift":"push"]((()=>{d=e,t(5,d)}))}]}class qe extends S{constructor(e){var n;super(),document.getElementById("svelte-lh0bc7-style")||((n=l("style")).id="svelte-lh0bc7-style",n.textContent=".beyondembeddable__wrapper.resizable.svelte-lh0bc7.svelte-lh0bc7{position:relative}em.svelte-lh0bc7.svelte-lh0bc7{position:absolute;top:100%;font-size:0.8em;right:0;z-index:0}.beyondembeddable__sandbox.svelte-lh0bc7.svelte-lh0bc7{width:100%;height:100%}.beyondembeddable__wrapper.resizable.svelte-lh0bc7 .beyondembeddable__sandbox.svelte-lh0bc7{position:absolute;top:0;left:0;right:0;bottom:0;min-width:100%;min-height:100%;z-index:1;resize:both;overflow:auto}img.svelte-lh0bc7.svelte-lh0bc7{width:100%;height:auto}",i(document.head,n)),R(this,e,Ye,Ke,s,{owner:6,uris:7,resizable:0,width:1,height:2})}}function He(e){let n,t;return n=new qe({props:{owner:e[0],uris:e[6],resizable:e[1],width:e[2],height:e[3]}}),n.$on("error",e[11]),{c(){var e;(e=n.$$.fragment)&&e.c()},m(e,o){O(n,e,o),t=!0},p(e,t){const o={};1&t&&(o.owner=e[0]),64&t&&(o.uris=e[6]),2&t&&(o.resizable=e[1]),4&t&&(o.width=e[2]),8&t&&(o.height=e[3]),n.$set(o)},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){T(n.$$.fragment,e),t=!1},d(e){A(n,e)}}}function Ge(n){let t,o;return{c(){t=l("p"),o=d(n[5]),p(t,"class","beyondembeddable__error")},m(e,n){a(e,t,n),i(t,o)},p(e,n){32&n&&function(e,n){n=""+n,e.wholeText!==n&&(e.data=n)}(o,e[5])},i:e,o:e,d(e){e&&c(t)}}}function Qe(e){let n,t,r,s;const i=[Ge,He],d=[];function u(e,n){return e[5]?0:e[4]?1:-1}return~(t=u(e))&&(r=d[t]=i[t](e)),{c(){n=l("div"),r&&r.c(),p(n,"class","beyondembeddable")},m(e,o){a(e,n,o),~t&&d[t].m(n,null),s=!0},p(e,[s]){let a=t;t=u(e),t===a?~t&&d[t].p(e,s):(r&&(I={r:0,c:[],p:I},T(d[a],1,1,(()=>{d[a]=null})),I.r||o(I.c),I=I.p),~t?(r=d[t],r||(r=d[t]=i[t](e),r.c()),z(r,1),r.m(n,null)):r=null)},i(e){s||(z(r),s=!0)},o(e){T(r),s=!1},d(e){e&&c(n),~t&&d[t].d()}}}function Ve(e,n,t){let{contract:o}=n,{tokenId:r=null}=n,{owner:s=null}=n,{network:i=P.mainnet}=n,{resizable:a=!0}=n,{width:c="388px"}=n,{height:l="560px"}=n;let d=P.mainnet;d="string"==typeof i&&P[i]?P[i]:parseInt(i);let u,p,f,h=!1;return e.$$set=e=>{"contract"in e&&t(7,o=e.contract),"tokenId"in e&&t(8,r=e.tokenId),"owner"in e&&t(0,s=e.owner),"network"in e&&t(9,i=e.network),"resizable"in e&&t(1,a=e.resizable),"width"in e&&t(2,c=e.width),"height"in e&&t(3,l=e.height)},e.$$.update=()=>{448&e.$$.dirty&&o&&null!==r&&(f?f.tokenURI&&t(4,h=!0):async function(){try{p=new J(o,r,d),await p.connect(),t(6,f=await p.uris())}catch(e){t(5,u=e.message)}}())},[s,a,c,l,h,u,f,o,r,i,"0.0.3",e=>t(5,u=e.detail.message)]}return class extends S{constructor(e){super(),R(this,e,Ve,Qe,s,{contract:7,tokenId:8,owner:0,network:9,resizable:1,width:2,height:3,version:10})}get version(){return this.$$.ctx[10]}}}));
